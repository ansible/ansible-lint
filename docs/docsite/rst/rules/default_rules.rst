
.. _lint_default_rules:

*************
Default Rules
*************

.. contents:: Topics

The table below shows the the default rules used by Ansible Lint to evaluate playbooks and roles:

============================================================================================================================================================================================================================================= ============================================================================================================================================================================================================================================= ============================================================================================================================================================================================================================================= 
ID                                                                                                                                                                                                                                            Sample Message                                                                                                                                                                                                                                Description                                                                                                                                                                                                                                   
============================================================================================================================================================================================================================================= ============================================================================================================================================================================================================================================= ============================================================================================================================================================================================================================================= 
**E1**                                                                                                                                                                                                                                        *deprecated*                                                                                                                                                                                                                                  
E101                                                                                                                                                                                                                                          Deprecated always_run                                                                                                                                                                                                                         Instead of ``always_run``, use ``check_mode``                                                                                                                                                                                                 
E102                                                                                                                                                                                                                                          No Jinja2 in when                                                                                                                                                                                                                             ``when`` lines should not include Jinja2 variables                                                                                                                                                                                            
E103                                                                                                                                                                                                                                          Deprecated sudo                                                                                                                                                                                                                               Instead of ``sudo``/``sudo_user``, use ``become``/``become_user``.                                                                                                                                                                            
E104                                                                                                                                                                                                                                          Using bare variables is deprecated                                                                                                                                                                                                            Using bare variables is deprecated. Update your playbooks so that the environment value uses the full variable syntax ``{{ your_variable }}``                                                                                                 
E105                                                                                                                                                                                                                                          Deprecated module                                                                                                                                                                                                                             These are deprecated modules, some modules are kept temporarily for backwards compatibility but usage is discouraged. For more details see: https://docs.ansible.com/ansible/latest/modules/list_of_all_modules.html                          
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
**E2**                                                                                                                                                                                                                                        *formatting*                                                                                                                                                                                                                                  
E201                                                                                                                                                                                                                                          Trailing whitespace                                                                                                                                                                                                                           There should not be any trailing whitespace                                                                                                                                                                                                   
E202                                                                                                                                                                                                                                          Octal file permissions must contain leading zero                                                                                                                                                                                              Numeric file permissions without leading zero can behave in unexpected ways. See http://docs.ansible.com/ansible/file_module.html                                                                                                             
E203                                                                                                                                                                                                                                          Most files should not contain tabs                                                                                                                                                                                                            Tabs can cause unexpected display issues, use spaces                                                                                                                                                                                          
E204                                                                                                                                                                                                                                          Lines should be no longer than 120 chars                                                                                                                                                                                                      Long lines make code harder to read and code review more difficult                                                                                                                                                                            
E205                                                                                                                                                                                                                                          Use ".yml" or ".yaml" playbook extension                                                                                                                                                                                                      Playbooks should have the ".yml" or ".yaml" extension                                                                                                                                                                                         
E206                                                                                                                                                                                                                                          Variables should have spaces before and after: {{ var_name }}                                                                                                                                                                                 Variables should have spaces before and after: ``{{ var_name }}``                                                                                                                                                                             
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
**E3**                                                                                                                                                                                                                                        *command-shell*                                                                                                                                                                                                                               
E301                                                                                                                                                                                                                                          Commands should not change things if nothing needs doing                                                                                                                                                                                      Commands should either read information (and thus set ``changed_when``) or not do something if it has already been done (using creates/removes) or only do it if another check has a particular result (``when``)                             
E302                                                                                                                                                                                                                                          Using command rather than an argument to e.g. file                                                                                                                                                                                            Executing a command when there are arguments to modules is generally a bad idea                                                                                                                                                               
E303                                                                                                                                                                                                                                          Using command rather than module                                                                                                                                                                                                              Executing a command when there is an Ansible module is generally a bad idea                                                                                                                                                                   
E304                                                                                                                                                                                                                                          Environment variables don't work as part of command                                                                                                                                                                                           Environment variables should be passed to ``shell`` or ``command`` through environment argument                                                                                                                                               
E305                                                                                                                                                                                                                                          Use shell only when shell functionality is required                                                                                                                                                                                           Shell should only be used when piping, redirecting or chaining commands (and Ansible would be preferred for some of those!)                                                                                                                   
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
**E4**                                                                                                                                                                                                                                        *module*                                                                                                                                                                                                                                      
E401                                                                                                                                                                                                                                          Git checkouts must contain explicit version                                                                                                                                                                                                   All version control checkouts must point to an explicit commit or tag, not just ``latest``                                                                                                                                                    
E402                                                                                                                                                                                                                                          Mercurial checkouts must contain explicit revision                                                                                                                                                                                            All version control checkouts must point to an explicit commit or tag, not just ``latest``                                                                                                                                                    
E403                                                                                                                                                                                                                                          Package installs should not use latest                                                                                                                                                                                                        Package installs should use ``state=present`` with or without a version                                                                                                                                                                       
E404                                                                                                                                                                                                                                          Doesn't need a relative path in role                                                                                                                                                                                                          ``copy`` and ``template`` do not need to use relative path for ``src``                                                                                                                                                                        
E405                                                                                                                                                                                                                                          Remote package tasks should have a retry                                                                                                                                                                                                      Package operations are unreliable as they require network communication and the availability of remote servers. To mitigate the potential problems, retries should be used via ``register: my_result`` and ``until: my_result | success``.    
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
**E5**                                                                                                                                                                                                                                        *task*                                                                                                                                                                                                                                        
E501                                                                                                                                                                                                                                          become_user requires become to work as expected                                                                                                                                                                                               ``become_user`` without ``become`` will not actually change user                                                                                                                                                                              
E502                                                                                                                                                                                                                                          All tasks should be named                                                                                                                                                                                                                     All tasks should have a distinct name for readability and for ``--start-at-task`` to work                                                                                                                                                     
E503                                                                                                                                                                                                                                          Tasks that run when changed should likely be handlers                                                                                                                                                                                         If a task has a ``when: result.changed`` setting, it is effectively acting as a handler                                                                                                                                                       
E504                                                                                                                                                                                                                                          Do not use 'local_action', use 'delegate_to: localhost'                                                                                                                                                                                       Do not use ``local_action``, use ``delegate_to: localhost``                                                                                                                                                                                   
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
**E6**                                                                                                                                                                                                                                        *idiom*                                                                                                                                                                                                                                       
E601                                                                                                                                                                                                                                          Don't compare to literal True/False                                                                                                                                                                                                           Use ``when: var`` rather than ``when: var == True`` (or conversely ``when: not var``)                                                                                                                                                         
E602                                                                                                                                                                                                                                          Don't compare to empty string                                                                                                                                                                                                                 Use ``when: var`` rather than ``when: var != ""`` (or conversely ``when: not var`` rather than ``when: var == ""``)                                                                                                                           
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
**E7**                                                                                                                                                                                                                                        *metadata*                                                                                                                                                                                                                                    
E701                                                                                                                                                                                                                                          meta/main.yml should contain relevant info                                                                                                                                                                                                    meta/main.yml should contain: ``author, description, license, min_ansible_version, platforms``                                                                                                                                                
E702                                                                                                                                                                                                                                          Tags must contain lowercase letters and digits only                                                                                                                                                                                           Tags must contain lowercase letters and digits only, and ``galaxy_tags`` is expected to be a list                                                                                                                                             
E703                                                                                                                                                                                                                                          meta/main.yml default values should be changed                                                                                                                                                                                                meta/main.yml default values should be changed for: ``author, description, company, license``                                                                                                                                                 
E704                                                                                                                                                                                                                                          meta/main.yml video_links should be formatted correctly                                                                                                                                                                                       Items in ``video_links`` in meta/main.yml should be dictionaries, and contain only keys ``url`` and ``title``, and have a shared link from a supported provider                                                                               
============================================================================================================================================================================================================================================= ============================================================================================================================================================================================================================================= ============================================================================================================================================================================================================================================= 
